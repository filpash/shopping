(this.webpackJsonpshoping=this.webpackJsonpshoping||[]).push([[0],{198:function(e,t,a){e.exports=a(383)},208:function(e,t,a){},383:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setBooks",(function(){return f}));var r={};a.r(r),a.d(r,"addToCart",(function(){return C})),a.d(r,"removeFromCart",(function(){return _}));var c={};a.r(c),a.d(c,"setFilter",(function(){return S})),a.d(c,"setSearchQuery",(function(){return B}));var i=a(0),o=a.n(i),l=a(30),u=a.n(l),s=a(24),m=(a(207),a(208),a(16)),d=a(18),f=function(e){return{type:"SET_BOOKS",payload:e}},E=a(47),b=a(48),p=a(49),h=a(52),v=a(53),y=a(391),O=a(394),j=a(170),g=a.n(j),C=function(e){return{type:"ADD_TO_CART",payload:e}},_=function(e){return{type:"REMOVE_FROM_CART",payload:e}},k=a(186),R=a(34),T=a(384),w=function(e){var t=e.title,a=e.author,n=e.price,r=e.image,c=e.addToCart,i=e.addedCount;return o.a.createElement(O.a,null,o.a.createElement("div",{className:"card-image"},o.a.createElement(k.a,{src:r})),o.a.createElement(O.a.Content,null,o.a.createElement(O.a.Header,null,t),o.a.createElement(O.a.Meta,null,o.a.createElement("span",{className:"date"},a))),o.a.createElement(O.a.Content,{extra:!0},o.a.createElement("a",null,o.a.createElement(R.a,{name:"rub"}),n)),o.a.createElement(T.a,{onClick:c.bind(void 0,e)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 ",i>0&&"(".concat(i,")")))},I=Object(s.b)((function(e,t){var a=e.cart,n=t.id;return{addedCount:a.items.reduce((function(e,t){return e+(t.id===n?1:0)}),0)}}),(function(e){return Object(m.a)({},Object(d.b)(r,e))}))(w),S=function(e){return{type:"SET_FILTER",payload:e}},B=function(e){return{type:"SET_QUERY",payload:e}},A=a(395),F=a(390),Q=function(e){var t=e.setFilter,a=e.filterBy,n=e.searchQuery,r=e.setSearchQuery;return o.a.createElement(A.a,{secondary:!0},o.a.createElement(A.a.Item,{active:"all"===a,onClick:t.bind(void 0,"all")},"\u0412\u0441\u0435"),o.a.createElement(A.a.Item,{active:"price_high"===a,onClick:t.bind(void 0,"price_high")},"\u0426\u0435\u043d\u0430 (\u0434\u043e\u0440\u043e\u0433\u0438\u0435)"),o.a.createElement(A.a.Item,{active:"price_low"===a,onClick:t.bind(void 0,"price_low")},"\u0426\u0435\u043d\u0430 (\u0434\u0435\u0448\u0435\u0432\u044b\u0435)"),o.a.createElement(A.a.Item,{active:"author"===a,onClick:t.bind(void 0,"author")},"\u0410\u0432\u0442\u043e\u0440"),o.a.createElement(A.a.Item,null,o.a.createElement(F.a,{icon:"search",onChange:function(e){return r(e.target.value)},value:n,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441..."})))},M=Object(s.b)((function(e){e.books;return{filterBy:e.filter.filterBy}}),(function(e){return Object(m.a)({},Object(d.b)(c,e))}))(Q),L=a(393),D=a(392),x=function(e){var t=e.title,a=e.id,n=e.image,r=e.removeFromCart;return o.a.createElement(L.a,{selection:!0,divided:!0,verticalAlign:"middle"},o.a.createElement(L.a.Item,null,o.a.createElement(L.a.Content,{floated:"right"},o.a.createElement(T.a,{onClick:r.bind(void 0,a),color:"red"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),o.a.createElement(k.a,{avatar:!0,src:n}),o.a.createElement(L.a.Content,null,t)))},P=function(e){var t=e.totalPrice,a=e.count,n=e.items;return o.a.createElement(A.a,null,o.a.createElement(A.a.Item,{name:"browse"},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"),o.a.createElement(A.a.Menu,{position:"right"},o.a.createElement(A.a.Item,{name:"signup"},"\u0418\u0442\u043e\u0433\u043e: \xa0 ",o.a.createElement("b",null,t),"\xa0\u0440\u0443\u0431."),o.a.createElement(D.a,{trigger:o.a.createElement(A.a.Item,{name:"help"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 (",o.a.createElement("b",null,a),")"),content:n.map((function(e){return o.a.createElement(x,e)})),on:"click",hideOnScroll:!0})))},Y=a(184),J=a.n(Y),K=Object(s.b)((function(e){var t=e.cart;return{totalPrice:t.items.reduce((function(e,t){return e+t.price}),0),count:t.items.length,items:J()(t.items,(function(e){return e.id}))}}),(function(e){return Object(m.a)({},Object(d.b)(r,e))}))(P),N=function(e){function t(){return Object(E.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.setBooks;g.a.get("/books.json").then((function(t){var a=t.data;e(a)}))}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.isReady;return o.a.createElement(y.a,null,o.a.createElement(K,null),o.a.createElement(M,null),o.a.createElement(O.a.Group,{itemsPerRow:4},a?t.map((function(e,t){return o.a.createElement(I,Object.assign({key:t},e))})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))}}]),t}(i.Component),U=a(84),V=a.n(U),G=function(e,t,a){return function(e,t){switch(t){case"price_high":return V()(e,"price","desc");case"price_low":return V()(e,"price","asc");case"author":return V()(e,"author","asc");default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,a),t)},H=Object(s.b)((function(e){var t=e.books,a=e.filter;return{books:t.items&&G(t.items,a.filterBy,a.searchQuery),isReady:t.isReady}}),(function(e){return Object(m.a)({},Object(d.b)(n,e))}))(N),W=a(185),q=a.n(W),z={isReady:!1,items:null},X=a(187),Z={items:[]},$={searchQuery:"",filterBy:"all"},ee=Object(d.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return Object(m.a)({},e,{items:t.payload,isReady:!0});case"SET_IS_READY":return Object(m.a)({},e,{isReady:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(m.a)({},e,{items:[].concat(Object(X.a)(e.items),[t.payload])});case"REMOVE_FROM_CART":return Object(m.a)({},e,{items:e.items.filter((function(e){return e.id!==t.payload}))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return Object(m.a)({},e,{searchQuery:t.payload});case"SET_FILTER":return Object(m.a)({},e,{filterBy:t.payload});default:return e}}}),te=Object(d.d)(ee,Object(d.a)(q.a));u.a.render(o.a.createElement(s.a,{store:te},o.a.createElement(H,null)),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.8b21994f.chunk.js.map